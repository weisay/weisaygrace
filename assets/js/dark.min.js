const rootElement=document.documentElement;const darkModeClassName="dark";const darkModeStorageKey="user-color-scheme";const validColorModeKeys={dark:true,light:true};const invertDarkModeObj={dark:"light",light:"dark"};const setLocalStorage=(key,value)=>{try{localStorage.setItem(key,value)}catch(e){}};const removeLocalStorage=(key)=>{try{localStorage.removeItem(key)}catch(e){}};const getLocalStorage=(key)=>{try{return localStorage.getItem(key)}catch(e){return null}};const getModeFromCSSMediaQuery=()=>{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"};const setColorScheme=(mode)=>{rootElement.classList.remove(mode,invertDarkModeObj[mode]);rootElement.classList.add(mode)};const resetRootDarkModeClassAndLocalStorage=()=>{rootElement.classList.remove(darkModeClassName,invertDarkModeObj[darkModeClassName]);removeLocalStorage(darkModeStorageKey)};const applyCustomDarkModeSettings=(mode)=>{const currentSetting=mode||getLocalStorage(darkModeStorageKey);if(currentSetting===getModeFromCSSMediaQuery()){resetRootDarkModeClassAndLocalStorage();setColorScheme(currentSetting)}else if(validColorModeKeys[currentSetting]){rootElement.classList.add(currentSetting);rootElement.classList.remove(invertDarkModeObj[currentSetting])}else{resetRootDarkModeClassAndLocalStorage();setColorScheme(getModeFromCSSMediaQuery())}};const toggleCustomDarkMode=()=>{let currentSetting=getLocalStorage(darkModeStorageKey);if(validColorModeKeys[currentSetting]){currentSetting=invertDarkModeObj[currentSetting]}else if(currentSetting===null){currentSetting=invertDarkModeObj[getModeFromCSSMediaQuery()]}else{return}setLocalStorage(darkModeStorageKey,currentSetting);return currentSetting};applyCustomDarkModeSettings();const onSystemSchemeChanged=(event)=>{const newColorScheme=event.matches?"dark":"light";resetRootDarkModeClassAndLocalStorage();setColorScheme(newColorScheme)};const darkModePreference=window.matchMedia("(prefers-color-scheme: dark)");darkModePreference.addEventListener("change",onSystemSchemeChanged);darkModePreference.addListener(onSystemSchemeChanged);