const rootElement=document.documentElement;const darkModeClassName="dark";const darkModeStorageKey="user-color-scheme";const validColorModeKeys={dark:true,light:true};const invertDarkModeObj={dark:"light",light:"dark"};const storage={get:(key)=>{try{return localStorage.getItem(key)}catch(e){console.error("Storage Get Error:",e);return null}},set:(key,value)=>{try{localStorage.setItem(key,value);return true}catch(e){console.error("Storage Set Error:",e);return false}},remove:(key)=>{try{localStorage.removeItem(key);return true}catch(e){console.error("Storage Remove Error:",e);return false}},};const getSystemColorScheme=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";const applyColorScheme=(mode)=>{rootElement.classList.remove(...Object.keys(validColorModeKeys));if(validColorModeKeys[mode]){rootElement.classList.add(mode)}};const resetColorScheme=()=>{rootElement.classList.remove(...Object.keys(validColorModeKeys));storage.remove(darkModeStorageKey);applyColorScheme(getSystemColorScheme())};const initializeColorScheme=(mode=null)=>{const savedSetting=mode??storage.get(darkModeStorageKey);const systemScheme=getSystemColorScheme();if(savedSetting===systemScheme){resetColorScheme()}else if(validColorModeKeys[savedSetting]){applyColorScheme(savedSetting)}else{resetColorScheme()}};const toggleColorScheme=()=>{const savedSetting=storage.get(darkModeStorageKey);const currentMode=validColorModeKeys[savedSetting]?savedSetting:getSystemColorScheme();const newMode=invertDarkModeObj[currentMode];storage.set(darkModeStorageKey,newMode);applyColorScheme(newMode);return newMode};const handleSystemSchemeChange=(event)=>{const newScheme=event.matches?"dark":"light";resetColorScheme();applyColorScheme(newScheme)};initializeColorScheme();const mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");if(typeof mediaQuery.addEventListener==="function"){mediaQuery.addEventListener("change",handleSystemSchemeChange)}else if(typeof mediaQuery.addListener==="function"){mediaQuery.addListener(handleSystemSchemeChange)}